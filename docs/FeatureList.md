# H5 移动端基础通用框架功能清单

## 📋 项目概述

基于 Vue3 + Vite + Tailwind CSS + TDesign Mobile 的技术栈，构建一套完整的 H5 移动端基础框架。

---

## 🏗️ 核心架构模块

### 1. 构建工具层 (Build System) ✅

- [x] **Vite 基础配置**
  - [x] 移动端专属构建优化
  - [x] CSS 代码分割配置
  - [x] chunk 分包策略
  - [x] 资源压缩配置
- [x] **开发环境配置**
  - [x] 热重载配置
  - [x] 代理配置
  - [x] 源映射配置
- [x] **生产环境配置**
  - [x] 代码压缩
  - [x] 资源哈希
  - [x] 打包分析

### 2. 样式系统 (Styling System)

- [ ] **Tailwind CSS v4 配置**
  - [ ] 设计令牌系统
  - [ ] 自定义工具类
  - [ ] 组件样式扩展
- [ ] **移动端适配方案**
  - [ ] vw 视口适配
  - [ ] 安全区域处理
  - [ ] 横竖屏适配
- [ ] **主题系统**
  - [ ] 亮色/暗色主题
  - [ ] 动态主题切换
  - [ ] 品牌色配置

### 3. TypeScript 支持

- [ ] **类型定义体系**
  - [ ] API 接口类型
  - [ ] 业务数据类型
  - [ ] 组件 Props 类型
- [ ] **工具类型**
  - [ ] 通用工具类型
  - [ ] 表单类型
  - [ ] 路由类型

---

## 🔧 核心基础设施

### 1. 适配系统 (Adaptation System)

- [ ] **视口适配**
  - [ ] vw 单位自动转换
  - [ ] 设计稿基准配置 (375px)
  - [ ] 最大宽度限制
- [ ] **安全区域适配**
  - [ ] 刘海屏适配
  - [ ] 底部手势区域
  - [ ] 状态栏高度适配
- [ ] **设备检测**
  - [ ] 设备类型识别
  - [ ] 屏幕尺寸检测
  - [ ] 横竖屏监听
- [ ] **降级方案**
  - [ ] REM 降级支持
  - [ ] 老旧浏览器兼容

### 2. 网络请求层 (HTTP Client)

- [ ] **请求核心**
  - [ ] Axios 实例封装
  - [ ] 基础 URL 配置
  - [ ] 超时时间配置
- [ ] **拦截器系统**
  - [ ] 请求拦截器
    - [ ] Token 自动添加
    - [ ] 请求参数处理
  - [ ] 响应拦截器
    - [ ] 错误统一处理
    - [ ] 数据格式化
- [ ] **错误处理**
  - [ ] 网络错误处理
  - [ ] 业务错误处理
  - [ ] 错误重试机制
- [ ] **高级功能**
  - [ ] 请求取消
  - [ ] 并发控制
  - [ ] 接口缓存

### 3. 状态管理 (State Management)

- [ ] **用户状态 (auth)**
  - [ ] 登录状态管理
  - [ ] 用户信息存储
  - [ ] 权限信息管理
- [ ] **应用状态 (app)**
  - [ ] 全局加载状态
  - [ ] 错误状态管理
  - [ ] 配置信息管理
- [ ] **主题状态 (theme)**
  - [ ] 当前主题记录
  - [ ] 主题配置存储
- [ ] **缓存状态 (cache)**
  - [ ] 接口数据缓存
  - [ ] 页面状态缓存

### 4. 路由系统 (Router System)

- [ ] **路由配置**
  - [ ] 路由表定义
  - [ ] 懒加载配置
  - [ ] 嵌套路由支持
- [ ] **路由守卫**
  - [ ] 登录状态验证
  - [ ] 权限验证
  - [ ] 路由跳转拦截
- [ ] **路由功能**
  - [ ] 页面切换动画
  - [ ] 滚动行为控制
  - [ ] 路由历史管理

### 5. 存储系统 (Storage System)

- [ ] **本地存储**
  - [ ] localStorage 封装
  - [ ] sessionStorage 封装
- [ ] **安全存储**
  - [ ] 加密存储支持
  - [ ] 自动过期处理
- [ ] **存储工具**
  - [ ] 类型安全存取
  - [ ] 存储空间管理

---

## 🎨 UI 组件体系

### 1. 基础组件 (Base Components)

- [ ] **布局组件**
  - [ ] 安全区域容器
  - [ ] 页面布局容器
  - [ ] 弹性布局组件
- [ ] **反馈组件**
  - [ ] 加载状态组件
  - [ ] 空状态组件
  - [ ] 错误状态组件
- [ ] **功能组件**
  - [ ] 图片组件 (懒加载)
  - [ ] 图标组件
  - [ ] 按钮组件扩展

### 2. 业务组件 (Business Components)

- [ ] **表单组件**
  - [ ] 增强输入框
  - [ ] 验证码输入
  - [ ] 地址选择器
- [ ] **列表组件**
  - [ ] 虚拟滚动列表
  - [ ] 下拉刷新
  - [ ] 上拉加载更多
- [ ] **导航组件**
  - [ ] 底部导航栏
  - [ ] 顶部导航栏
  - [ ] 步骤条组件

### 3. TDesign Mobile 增强

- [ ] **组件适配**
  - [ ] 尺寸 vw 适配
  - [ ] 主题色统一
  - [ ] 交互体验优化
- [ ] **功能扩展**
  - [ ] 组件组合封装
  - [ ] 业务场景封装

---

## 🛠️ 工具函数库

### 1. 通用工具 (Utilities)

- [ ] **数据类型工具**
  - [ ] 类型判断函数
  - [ ] 数据克隆
  - [ ] 深度合并
- [ ] **函数式工具**
  - [ ] 防抖/节流
  - [ ] 函数柯里化
  - [ ] 管道函数
- [ ] **对象操作**
  - [ ] 对象路径取值
  - [ ] 对象过滤
  - [ ] 对象转换

### 2. 格式化工具 (Formatting)

- [ ] **日期格式化**
  - [ ] 常用日期格式
  - [ ] 相对时间显示
  - [ ] 日期计算
- [ ] **数字格式化**
  - [ ] 金额格式化
  - [ ] 数字千分位
  - [ ] 百分比显示
- [ ] **字符串处理**
  - [ ] 手机号脱敏
  - [ ] 文本截断
  - [ ] URL 参数处理

### 3. 验证工具 (Validation)

- [ ] **基础验证**
  - [ ] 手机号验证
  - [ ] 邮箱验证
  - [ ] 身份证验证
- [ ] **业务验证**
  - [ ] 表单规则验证
  - [ ] 数据格式验证
- [ ] **验证工具**
  - [ ] 验证器组合
  - [ ] 异步验证支持

---

## ⚡ 组合式函数 (Composables)

### 1. 状态管理相关

- [ ] **useAuth**
  - [ ] 登录状态管理
  - [ ] 用户信息获取
  - [ ] 权限验证
- [ ] **useApp**
  - [ ] 应用状态管理
  - [ ] 全局配置获取
- [ ] **useTheme**
  - [ ] 主题切换
  - [ ] 主题状态监听

### 2. 网络请求相关

- [ ] **useRequest**
  - [ ] 请求状态管理
  - [ ] 自动 loading
  - [ ] 错误处理
- [ ] **usePagination**
  - [ ] 分页数据管理
  - [ ] 加载更多
  - [ ] 数据刷新

### 3. 业务功能相关

- [ ] **useForm**
  - [ ] 表单状态管理
  - [ ] 表单验证
  - [ ] 表单提交
- [ ] **useUpload**
  - [ ] 文件上传管理
  - [ ] 上传进度
  - [ ] 多文件上传
- [ ] **useWechat**
  - [ ] 微信 SDK 初始化
  - [ ] 微信分享
  - [ ] 微信支付

### 4. UI 交互相关

- [ ] **useModal**
  - [ ] 弹窗状态管理
  - [ ] 弹窗队列
- [ ] **useToast**
  - [ ] 消息提示管理
- [ ] **useLoading**
  - [ ] 加载状态管理

---

## 🔌 指令系统 (Directives)

### 1. 交互指令

- [ ] **v-loading**
  - [ ] 元素加载状态
  - [ ] 自定义加载文案
- [ ] **v-lazy**
  - [ ] 图片懒加载
  - [ ] 背景图懒加载
- [ ] **v-debounce**
  - [ ] 点击防抖
  - [ ] 输入防抖

### 2. 功能指令

- [ ] **v-copy**
  - [ ] 文本复制
  - [ ] 复制反馈
- [ ] **v-permission**
  - [ ] 权限控制显示
  - [ ] 权限验证
- [ ] **v-focus**
  - [ ] 自动聚焦
  - [ ] 条件聚焦

### 3. UI 指令

- [ ] **v-touch**
  - [ ] 触摸反馈
  - [ ] 手势识别
- [ ] **v-ripple**
  - [ ] 水波纹效果
- [ ] **v-longpress**
  - [ ] 长按事件

---

## 📱 业务功能模块

### 1. 用户系统 (Auth System)

- [ ] **登录模块**
  - [ ] 账号密码登录
  - [ ] 手机验证码登录
  - [ ] 第三方登录
- [ ] **注册模块**
  - [ ] 用户注册
  - [ ] 注册协议
- [ ] **个人中心**
  - [ ] 用户信息展示
  - [ ] 信息编辑
  - [ ] 安全设置

### 2. 支付系统 (Payment System)

- [ ] **微信支付**
  - [ ] JSAPI 支付
  - [ ] 支付状态查询
- [ ] **支付宝支付**
  - [ ] 支付宝 H5 支付
- [ ] **支付组件**
  - [ ] 支付密码输入
  - [ ] 支付结果页面

### 3. 上传系统 (Upload System)

- [ ] **图片上传**
  - [ ] 多图上传
  - [ ] 图片压缩
  - [ ] 图片预览
- [ ] **文件上传**
  - [ ] 文件类型限制
  - [ ] 文件大小限制
  - [ ] 上传进度显示
- [ ] **上传组件**
  - [ ] 上传按钮组件
  - [ ] 文件列表组件

---

## 🚀 性能优化

### 1. 加载性能

- [ ] **代码分割**
  - [ ] 路由级别分割
  - [ ] 组件级别分割
- [ ] **预加载策略**
  - [ ] 关键资源预加载
  - [ ] 路由预加载
- [ ] **资源优化**
  - [ ] 图片懒加载
  - [ ] 字体文件优化

### 2. 运行时性能

- [ ] **虚拟滚动**
  - [ ] 长列表虚拟化
  - [ ] 表格虚拟化
- [ ] **组件优化**
  - [ ] 组件懒加载
  - [ ] 记忆化组件
- [ ] **状态优化**
  - [ ] 状态持久化
  - [ ] 状态缓存

### 3. 缓存策略

- [ ] **接口缓存**
  - [ ] 内存缓存
  - [ ] 持久化缓存
- [ ] **资源缓存**
  - [ ] 静态资源缓存
  - [ ] 动态资源缓存

---

## 🔍 监控与调试

### 1. 错误监控

- [ ] **错误收集**
  - [ ] JavaScript 错误
  - [ ] 网络请求错误
  - [ ] 资源加载错误
- [ ] **错误上报**
  - [ ] 错误信息格式化
  - [ ] 用户行为记录
  - [ ] 错误统计分析

### 2. 性能监控

- [ ] **性能指标**
  - [ ] FP/FCP 监控
  - [ ] LCP 监控
  - [ ] CLS 监控
- [ ] **用户体验**
  - [ ] 页面加载时间
  - [ ] 接口响应时间
  - [ ] 操作响应时间

### 3. 开发调试

- [ ] **调试工具**
  - [ ] Eruda 移动端调试
  - [ ] Vue DevTools 集成
- [ ] **日志系统**
  - [ ] 分级日志输出
  - [ ] 生产环境日志控制

---

## 📦 工程化配置

### 1. 代码规范

- [ ] **ESLint 配置**
  - [ ] Vue 3 规则
  - [ ] TypeScript 规则
  - [ ] 移动端最佳实践
- [ ] **Prettier 配置**
  - [ ] 代码格式化规则
  - [ ] 自动格式化
- [ ] **Stylelint 配置**
  - [ ] CSS 样式规范
  - [ ] Tailwind CSS 规范

### 2. Git 工作流

- [ ] **Git Hooks**
  - [ ] 提交前检查
  - [ ] 提交信息规范
- [ ] **Commit 规范**
  - [ ] Conventional Commits
  - [ ] 自动生成 CHANGELOG

### 3. 部署配置

- [ ] **环境配置**
  - [ ] 多环境配置管理
  - [ ] 环境变量管理
- [ ] **部署脚本**
  - [ ] 自动化部署
  - [ ] 版本管理

---

## 🎯 实施优先级建议

### P0 - 核心功能 (必须实现)

- [ ] 基础项目搭建
- [ ] 移动端适配系统
- [ ] 网络请求封装
- [ ] 路由系统
- [ ] 状态管理
- [ ] 基础 UI 组件

### P1 - 重要功能 (建议实现)

- [ ] 工具函数库
- [ ] 组合式函数
- [ ] 指令系统
- [ ] 用户系统
- [ ] 性能优化

### P2 - 增强功能 (可选实现)

- [ ] 支付系统
- [ ] 上传系统
- [ ] 监控系统
- [ ] 高级业务组件

---

## 📊 成功指标

### 技术指标

- [ ] 首屏加载时间 < 2s
- [ ] 核心资源大小 < 200KB
- [ ] Lighthouse 性能评分 > 80
- [ ] 兼容 iOS 10+ / Android 5+

### 开发指标

- [ ] 新页面开发时间 < 1天
- [ ] 组件复用率 > 60%
- [ ] 代码规范符合率 100%
- [ ] 自动化测试覆盖率 > 70%

---

## 📁 项目结构参考

src/
├── assets/ # 静态资源
│ ├── images/ # 图片资源
│ │ ├── icons/ # 图标
│ │ └── backgrounds/ # 背景图
│ └── fonts/ # 字体文件
├── components/ # 组件库
│ ├── base/ # 基础组件
│ │ ├── AppLoading.vue # 全局加载
│ │ ├── AppSafeArea.vue # 安全区域容器
│ │ ├── AppImage.vue # 增强图片组件
│ │ └── AppButton.vue # 增强按钮
│ ├── business/ # 业务组件
│ │ ├── AuthCode.vue # 验证码输入
│ │ ├── UploadImage.vue # 图片上传
│ │ └── VirtualList.vue # 虚拟列表
│ └── layout/ # 布局组件
│ ├── AppHeader.vue # 顶部导航
│ ├── AppFooter.vue # 底部导航
│ └── AppLayout.vue # 页面布局
├── core/ # 核心基础设施（新增）
│ ├── adaptation/ # 适配系统
│ │ ├── viewport.ts # 视口适配
│ │ ├── safe-area.ts # 安全区域
│ │ └── device.ts # 设备检测
│ ├── http/ # 网络请求
│ │ ├── client.ts # HTTP 客户端
│ │ ├── interceptors.ts # 拦截器
│ │ └── api.ts # API 管理
│ ├── router/ # 路由系统
│ │ ├── index.ts # 路由配置
│ │ ├── guards.ts # 路由守卫
│ │ └── routes.ts # 路由表
│ └── utils/ # 核心工具
│ ├── storage.ts # 存储封装
│ ├── validator.ts # 验证工具
│ └── formatter.ts # 格式化工具
├── stores/ # 状态管理
│ ├── auth.ts # 用户状态
│ ├── app.ts # 应用状态
│ ├── theme.ts # 主题状态
│ └── index.ts # Store 入口
├── styles/ # 样式系统
│ ├── design-system.css # 设计系统（Tailwind v4）
│ ├── utilities.css # 自定义工具类
│ ├── global.css # 全局样式
│ └── tdesign-override.css # TDesign 组件覆盖
├── views/ # 页面组件
│ ├── home/ # 首页
│ │ └── Index.vue
│ ├── auth/ # 认证相关
│ │ ├── Login.vue
│ │ └── Register.vue
│ └── profile/ # 个人中心
│ └── Index.vue
├── shared/ # 共享资源（新增）
│ ├── composables/ # 组合式函数
│ │ ├── useRequest.ts # 请求封装
│ │ ├── useForm.ts # 表单处理
│ │ ├── useUpload.ts # 文件上传
│ │ └── useWechat.ts # 微信 SDK
│ ├── directives/ # 自定义指令
│ │ ├── lazy.ts # 懒加载
│ │ ├── loading.ts # 加载状态
│ │ └── permission.ts # 权限控制
│ └── constants/ # 常量定义
│ ├── api.ts # API 常量
│ ├── storage.ts # 存储键名
│ └── regex.ts # 正则表达式
├── App.vue # 根组件
├── main.ts # 应用入口
└── vite-env.d.ts # Vite 类型定义
